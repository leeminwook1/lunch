# 🗳️ 그룹 투표 기능 가이드

## 개요

그룹 투표 기능은 여러 명이 함께 점심 가게를 민주적으로 결정할 수 있는 기능입니다. 투표를 생성하고, 후보를 선택하고, 실시간으로 투표 현황을 확인할 수 있습니다.

## 주요 기능

### 1. 투표 생성
- 투표 제목과 설명 작성
- 2개 이상의 후보 가게 선택
- 마감 시간 설정
- 투표 변경 허용 여부 설정

### 2. 투표 참여
- 후보 가게 중 하나에 투표
- 실시간 투표 현황 확인
- 투표 변경 (허용된 경우)

### 3. 투표 관리
- 생성자는 투표를 조기 종료 가능
- 생성자는 투표 삭제 가능
- 마감 시간이 지나면 자동 종료

### 4. 결과 확인
- 투표 종료 후 우승 가게 확인
- 득표수와 득표율 확인
- 순위별 정렬

## 사용 방법

### 투표 만들기

1. 메인 페이지에서 **"🗳️ 그룹 투표"** 버튼 클릭
2. **"➕ 새 투표 만들기"** 버튼 클릭
3. 투표 정보 입력:
   - **제목**: 투표의 목적을 명확히 (예: "오늘 점심 뭐 먹을까요?")
   - **설명**: 추가 정보 입력 (선택사항)
   - **마감 시간**: 투표 종료 시간 설정
   - **투표 변경 허용**: 체크하면 다른 후보로 재투표 가능
4. **후보 선택**: 최소 2개 이상의 가게 선택
5. **"투표 만들기"** 버튼 클릭

### 투표하기

1. 투표 목록에서 참여할 투표 클릭
2. 후보 가게 확인
3. 원하는 가게의 **"🗳️ 투표하기"** 버튼 클릭
4. 실시간으로 업데이트되는 투표 현황 확인

### 투표 관리 (생성자만)

#### 투표 조기 종료
1. 투표 상세 페이지에서 **"🔒 투표 종료"** 버튼 클릭
2. 확인 후 투표 종료
3. 자동으로 우승자 결정

#### 투표 삭제
1. 투표 상세 페이지에서 **"🗑️ 투표 삭제"** 버튼 클릭
2. 확인 후 투표 삭제

## 투표 상태

### 🟢 진행중 (Active)
- 투표가 진행 중인 상태
- 사용자들이 투표 가능
- 마감 시간 전까지 유효

### ⚫ 종료 (Closed)
- 투표가 종료된 상태
- 더 이상 투표 불가
- 우승자 확인 가능

## 투표 결과

### 득표 현황
- 각 후보의 득표수와 득표율 표시
- 프로그레스 바로 시각화
- 실시간 업데이트

### 우승자 결정
- 가장 많은 표를 받은 가게가 우승
- 동점인 경우 먼저 득표한 가게 우승
- 🏆 아이콘으로 우승자 표시

## 활용 팁

### 효과적인 투표 제목
- ✅ "오늘 점심 뭐 먹을까요?"
- ✅ "금요일 회식 장소 투표"
- ✅ "이번 주 신규 가게 탐방"
- ❌ "투표"
- ❌ "가게"

### 적절한 마감 시간
- **점심 투표**: 오전 11시 30분 ~ 12시
- **저녁 투표**: 오후 5시 ~ 6시
- **주간 계획**: 1~2일 전

### 후보 선택 가이드
- 비슷한 가격대의 가게 선택
- 거리가 비슷한 가게 선택
- 다양한 카테고리 포함

## 자주 묻는 질문 (FAQ)

### Q: 투표를 변경할 수 있나요?
A: 투표 생성 시 "투표 변경 허용"을 체크한 경우에만 가능합니다. 다른 후보를 클릭하면 기존 투표가 취소되고 새로운 투표가 등록됩니다.

### Q: 투표 마감 시간을 변경할 수 있나요?
A: 현재는 투표 생성 후 마감 시간 변경이 불가능합니다. 필요한 경우 투표를 삭제하고 새로 만들어주세요.

### Q: 여러 후보에 투표할 수 있나요?
A: 아니요, 한 번에 하나의 후보에만 투표할 수 있습니다.

### Q: 투표 결과를 다른 사람과 공유할 수 있나요?
A: 투표 상세 페이지의 URL을 공유하면 다른 사람도 투표 현황을 확인할 수 있습니다.

### Q: 투표가 자동으로 종료되나요?
A: 네, 마감 시간이 지나면 자동으로 종료되고 우승자가 결정됩니다.

## 기술 정보

### API 엔드포인트

```
GET    /api/votes              # 투표 목록 조회
POST   /api/votes              # 투표 생성
GET    /api/votes/[id]         # 투표 상세 조회
DELETE /api/votes/[id]         # 투표 삭제
POST   /api/votes/[id]/vote    # 투표하기
POST   /api/votes/[id]/close   # 투표 종료
```

### 데이터 모델

```javascript
{
  title: String,              // 투표 제목
  description: String,        // 투표 설명
  createdBy: {
    userId: ObjectId,
    userName: String
  },
  candidates: [{
    restaurantId: ObjectId,
    restaurantName: String,
    votes: [{
      userId: ObjectId,
      userName: String,
      votedAt: Date
    }],
    voteCount: Number
  }],
  status: String,             // 'active' | 'closed'
  allowMultipleVotes: Boolean,
  endTime: Date,
  totalVoters: Number,
  winner: {
    restaurantId: ObjectId,
    restaurantName: String,
    voteCount: Number
  }
}
```

## 향후 개선 계획

- [ ] 투표 마감 시간 수정 기능
- [ ] 투표 알림 기능
- [ ] 투표 결과 통계 차트
- [ ] 투표 템플릿 저장
- [ ] 익명 투표 옵션
- [ ] 투표 댓글 기능
- [ ] 투표 공유 기능 강화

## 문제 해결

### 투표가 생성되지 않아요
- 제목을 입력했는지 확인
- 최소 2개 이상의 후보를 선택했는지 확인
- 마감 시간이 현재 시간보다 미래인지 확인

### 투표가 안 돼요
- 로그인 상태인지 확인
- 투표가 아직 진행 중인지 확인
- 이미 투표했는지 확인 (투표 변경 허용 여부 확인)

### 투표 목록이 안 보여요
- 페이지를 새로고침해보세요
- 필터 설정을 확인해보세요 (진행중/종료됨)

## 지원

문제가 발생하거나 제안사항이 있으시면 **"📝 피드백"** 메뉴를 통해 의견을 남겨주세요!
